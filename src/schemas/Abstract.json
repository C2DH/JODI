{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://journaldigitalhistory.eu/schemas/abstract.json",
    "type": "object",
    "title": "Schema to validate abstract submissions",
    "description": "Abstracts are stored as JSON",
    "default": {},
    "definitions": {
      "title": {
          "$id": "#/definitions/title",
          "type": "string",
          "title": "An usual article title",
          "description": "The article title",
          "default": "",
          "examples": [ "Once Upon a Time in Belval" ],
          "minLength": 10,
          "maxLength": 250
      },
      "abstract": {
          "$id": "#/definitions/abstract",
          "type": "string",
          "title": "The article abstract",
          "description": "The article abstract",
          "default": "",
          "examples": [
              "article abstract"
          ],
          "minLength": 100,
          "maxLength": 1000
      },
      "text250": {
          "$id": "#/definitions/text250",
          "type": "string",
          "title": "A short text",
          "description": "A short text, max 250 characters",
          "default": "",
          "examples": [ "Once Upon a Time in Belval, theere was a little house on a little hill" ],
          "maxLength": 250
      },
      "text500": {
          "$id": "#/definitions/text500",
          "type": "string",
          "title": "A medium text",
          "description": "A medium text, max 500 characters",
          "default": "",
          "examples": [ "Once Upon a Time in Belval, theere was a little house on a little hill" ],
          "maxLength": 500
      },
      "firstname": {
          "$id": "#/definitions/firstname",
          "type": "string",
          "title": "A first name",
          "description": "Person first name, up to 50 letters",
          "default": "",
          "examples": [
              "Joe"
          ],
          "maxLength": 50
      },
      "lastname": {
          "$id": "#/definitions/lastname",
          "type": "string",
          "title": "A last name",
          "description": "Person last name, up to 50 letters",
          "default": "",
          "examples": [
              "De Filippo"
          ],
          "maxLength": 50
      },
      "email": {
          "$id": "#/definitions/email",
          "type": "string",
          "pattern": "^[a-z0-9\\._%+!$&*=^|~#%{}\/\\-]+@([a-z0-9\\-]+\\.){1,}([a-z]{2,22})$",
          "title": "An Email",
          "description": "Personal email for authors, users etc...",
          "default": "",
          "examples": ["joe.defilippo@uni.lu"]
      },
      "affiliation": {
          "$id": "#/definitions/affiliation",
          "type": "string",
          "title": "a name of an Institution",
          "description": "Author current affiliation",
          "default": "",
          "examples": [
              "University of Minnesota, LUxembourg"
          ],
          "maxLength": 100
      },
      "URL": {
        "$id": "#/definitions/url",
        "type": "string",
        "title": "The dataset url schema",
        "description": "An explanation about the purpose of this instance.",
        "default": "",
        "examples": [
            "dataset url"
        ],
        "minLength": 7,
        "maxLength": 500,
        "pattern": "^(https?|http?)://"
      }
    },
    "examples": [
        {
            "title": "article title",
            "abstract": "article abstract",
            "authors": [
                {
                    "firstname": "John",
                    "lastname": "Foo",
                    "affiliation": "University of Minnesota"
                }
            ]
        }
    ],
    "required": [
        "title",
        "abstract",
        "contact",
        "authors"
    ],
    "additionalProperties": false,
    "properties": {
        "title": { "$ref": "#/definitions/title" },
        "abstract": { "$ref": "#/definitions/abstract" },
        "datasets": {
          "$id": "#/properties/dataset",
          "type": "object",
          "required": [
            "description"
          ],
          "additionalProperties": false,
          "properties": {
            "url":  { "$ref": "#/definitions/url" },
            "description":  { "$ref": "#/definitions/text500" }
          }
        },
        "contact": {
          "$id": "#/properties/contact",
          "type": "object",
          "title": "Basic contact info",
          "required": [
            "firstname",
            "lastname",
            "email"
          ],
          "additionalProperties": false,
          "properties": {
            "firstname":  { "$ref": "#/definitions/firstname" },
            "lastname":  { "$ref": "#/definitions/lastname" },
            "email":  { "$ref": "#/definitions/email" },
            "affiliation":  { "$ref": "#/definitions/affiliation" }
          }
        },
        "authors": {
            "$id": "#/properties/authors",
            "type": "array",
            "title": "A list of authors",
            "description": "An explanation about the purpose of this instance.",
            "default": [],
            "examples": [
                [
                    {
                        "firstname": "John",
                        "lastname": "Foo",
                        "email": "john.fooooooooo@uni.lu",
                        "affiliation": "University of Minnesota, Luxembourg"
                    }
                ]
            ],
            "additionalItems": true,
            "items": {
                "$id": "#/properties/authors/items",
                "anyOf": [
                    {
                        "$id": "#/properties/authors/items/anyOf/author",
                        "type": "object",
                        "title": "An author of a paper",
                        "description": "An explanation about the purpose of this instance.",
                        "default": {},
                        "examples": [
                            {
                                "firstname": "John",
                                "lastname": "Foo",
                                "affiliation": "University of Minnesota"
                            }
                        ],
                        "required": [
                            "firstname",
                            "lastname",
                            "affiliation"
                        ],
                        "additionalProperties": false,
                        "properties": {
                            "firstname": { "$ref": "#/definitions/firstname" },
                            "lastname": { "$ref": "#/definitions/lastname" },
                            "email": { "$ref": "#/definitions/email" },
                            "affiliation": { "$ref": "#/definitions/affiliation" }
                        }
                    }
                ]
            }
        }
    }
}
